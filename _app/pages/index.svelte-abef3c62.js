import{N as gt,O as oe,S as Be,i as Ae,s as Me,e as I,k as J,P as Re,c as U,a as O,d as y,m as F,Q as Pe,b as C,g as B,M,R as V,T as Ne,U as de,V as rt,G as he,l as $e,q as te,n as ot,o as fe,p as st,W as pe,X as z,t as ne,h as le,j as Oe,Y as we,E as mt,w as at,x as ct,y as ut,B as dt,Z as _t,H as bt,_ as Xe,v as vt,$ as yt,D as Ce,a0 as De}from"../chunks/index-2ad21f5a.js";import{d as wt,w as ft}from"../chunks/index-09ae69ab.js";function kt(e,t,l,n){var i,o=(i=n)==null||typeof i=="number"||typeof i=="boolean"?n:l(n),a=t.get(o);return a===void 0&&(a=e.call(this,n),t.set(o,a)),a}function Et(e,t,l){var n=Array.prototype.slice.call(arguments,3),i=l(n),o=t.get(i);return o===void 0&&(o=e.apply(this,n),t.set(i,o)),o}function St(e,t){return function(l,n,i,o,a){return i.bind(n,l,o,a)}(e,this,e.length===1?kt:Et,t.cache.create(),t.serializer)}const Ct=JSON.stringify;function ye(){this.cache=Object.create(null)}ye.prototype.has=function(e){return e in this.cache},ye.prototype.get=function(e){return this.cache[e]},ye.prototype.set=function(e,t){this.cache[e]=t};var Dt={create:function(){return new ye}};const Tt=(e,t={})=>{var Ie,Ue;let{bounds:l,axis:n="both",gpuAcceleration:i=!0,applyUserSelectHack:o=!0,disabled:a=!1,ignoreMultitouch:d=!1,grid:g,position:p,cancel:s,handle:r,defaultClass:f="neodrag",defaultClassDragging:c="neodrag-dragging",defaultClassDragged:m="neodrag-dragged",defaultPosition:u={x:0,y:0},onDragStart:w,onDrag:_,onDragEnd:b}=t;const S=new Promise(requestAnimationFrame);let P,h,k=!1,E=0,D=0,H=0,$=0,se=0,ae=0,{x:ie,y:re}=p?{x:(Ie=p==null?void 0:p.x)!=null?Ie:0,y:(Ue=p==null?void 0:p.y)!=null?Ue:0}:u;Te(ie,re,e,i);let X,Y,ce,G,Ve="",pt=!!p;const Ee=document.body.style,Z=e.classList,Se=(v,W)=>{const q={offsetX:E,offsetY:D,domRect:e.getBoundingClientRect()};e.dispatchEvent(new CustomEvent(v,{detail:q})),W==null||W(q)},ue=addEventListener;ue("touchstart",me,!1),ue("touchend",_e,!1),ue("touchmove",be,!1),ue("mousedown",me,!1),ue("mouseup",_e,!1),ue("mousemove",be,!1),e.style.touchAction="none";const He=()=>{let v=e.offsetWidth/Y.width;return isNaN(v)&&(v=1),v};function me(v){if(a||d&&v.type==="touchstart"&&v.touches.length>1)return;if(Z.add(f),ce=function(T,L){if(!T)return L;if(T instanceof HTMLElement)return T;const N=L.querySelector(T);if(N===null)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return N}(r,e),G=function(T,L){if(!T)return;if(T instanceof HTMLElement)return T;const N=L.querySelector(T);if(N===null)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return N}(s,e),P=/(both|x)/.test(n),h=/(both|y)/.test(n),l!==void 0&&(X=function(T,L){if(T instanceof HTMLElement)return T.getBoundingClientRect();if(typeof T=="object"){const{top:j=0,left:x=0,right:ee=0,bottom:ve=0}=T;return{top:j,right:window.innerWidth-ee,bottom:window.innerHeight-ve,left:x}}if(T==="parent")return L.parentNode.getBoundingClientRect();const N=document.querySelector(T);if(N===null)throw new Error("The selector provided for bound doesn't exists in the document.");return N.getBoundingClientRect()}(l,e)),Y=e.getBoundingClientRect(),qe(r)&&qe(s)&&r===s)throw new Error("`handle` selector can't be same as `cancel` selector");if(G!=null&&G.contains(ce))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");if(ce.contains(v.target)&&!(G!=null&&G.contains(v.target))&&(k=!0),!k)return;o&&(Ve=Ee.userSelect,Ee.userSelect="none"),Se("neodrag:start",w);const{clientX:W,clientY:q}=Ye(v)?v.touches[0]:v,R=He();P&&(H=W-ie/R),h&&($=q-re/R),X&&(se=W-Y.left,ae=q-Y.top)}function _e(){k&&(Z.remove(c),Z.add(m),o&&(Ee.userSelect=Ve),Se("neodrag:end",b),P&&(H=E),P&&($=D),k=!1)}function be(v){if(!k)return;Z.add(c),v.preventDefault(),Y=e.getBoundingClientRect();const{clientX:W,clientY:q}=Ye(v)?v.touches[0]:v;let R=W,T=q;const L=He();if(X){const N={left:X.left+se,top:X.top+ae,right:X.right+se-Y.width,bottom:X.bottom+ae-Y.height};R=We(R,N.left,N.right),T=We(T,N.top,N.bottom)}if(Array.isArray(g)){let[N,j]=g;if(isNaN(+N)||N<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+j)||j<0)throw new Error("2nd argument of `grid` must be a valid positive number");let x=R-H,ee=T-$;[x,ee]=Nt([Math.floor(N/L),Math.floor(j/L)],x,ee),R=H+x,T=$+ee}P&&(E=(R-H)*L),h&&(D=(T-$)*L),ie=E,re=D,Se("neodrag",_),S.then(()=>Te(E,D,e,i))}return{destroy:()=>{const v=removeEventListener;v("touchstart",me,!1),v("touchend",_e,!1),v("touchmove",be,!1),v("mousedown",me,!1),v("mouseup",_e,!1),v("mousemove",be,!1)},update:v=>{var q,R,T,L,N,j,x,ee,ve,ze,Le;n=v.axis||"both",a=(q=v.disabled)!=null?q:!1,d=(R=v.ignoreMultitouch)!=null?R:!1,r=v.handle,l=v.bounds,s=v.cancel,o=(T=v.applyUserSelectHack)!=null?T:!0,g=v.grid,i=(L=v.gpuAcceleration)!=null?L:!0;const W=Z.contains(m);Z.remove(f,m),f=(N=v.defaultClass)!=null?N:"neodrag",c=(j=v.defaultClassDragging)!=null?j:"neodrag-dragging",m=(x=v.defaultClassDragged)!=null?x:"neodrag-dragged",Z.add(f),W&&Z.add(m),pt&&(ie=E=(ve=(ee=v.position)==null?void 0:ee.x)!=null?ve:E,re=D=(Le=(ze=v.position)==null?void 0:ze.y)!=null?Le:D,S.then(()=>Te(E,D,e,i)))}}},Ye=e=>{var t;return!!((t=e.touches)!=null&&t.length)},We=(e,t,l)=>Math.min(Math.max(e,t),l),qe=e=>typeof e=="string";var nt,lt,it;const Nt=(Je=([e,t],l,n)=>{const i=(o,a)=>Math.round(o/a)*a;return[i(l,e),i(n,t)]},Fe=(nt=K==null?void 0:K.cache)!=null?nt:Dt,Ge=(lt=K==null?void 0:K.serializer)!=null?lt:Ct,((it=K==null?void 0:K.strategy)!=null?it:St)(Je,{cache:Fe,serializer:Ge}));var Je,K,Fe,Ge;function Te(e,t,l,n){l.style.transform=n?`translate3d(${+e}px, ${+t}px, 0)`:`translate(${+e}px, ${+t}px)`}function Bt(e){const t=e-1;return t*t*t+1}function Ke(e,{delay:t=0,duration:l=400,easing:n=gt}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:l,easing:n,css:o=>`opacity: ${o*i}`}}function ke(e,{delay:t=0,duration:l=400,easing:n=Bt,x:i=0,y:o=0,opacity:a=0}={}){const d=getComputedStyle(e),g=+d.opacity,p=d.transform==="none"?"":d.transform,s=g*(1-a);return{delay:t,duration:l,easing:n,css:(r,f)=>`
			transform: ${p} translate(${(1-r)*i}px, ${(1-r)*o}px);
			opacity: ${g-s*f}`}}function ht(e,t,l,n){var i,o,a=!0,d="withOld"in l,g=(_,b)=>{if(i=b,d&&(o=_),a){let S=t(_,b);if(t.length<2)b(S);else return S}},p=wt(e,g,n),s=!Array.isArray(e),r=_=>{a=!1,s?e.set(_):_.forEach((b,S)=>{e[S].set(b)}),a=!0};d&&(l=l.withOld);var f=l.length>=(d?3:2),c=null;function m(_){if(c&&(c(),c=null),d)var b=l(_,o,r);else var b=l(_,r);f?typeof b=="function"&&(c=b):r(b)}var u=!1;function w(_){var b,S,P,h;if(u){h=_(oe(p)),i(h);return}var k=p.subscribe(E=>{u?b?S=!0:b=!0:P=E});h=_(P),u=!0,i(h),k(),u=!1,S&&(h=oe(p)),b&&m(h)}return{subscribe:p.subscribe,set(_){w(()=>_)},update:w}}function At({imageURL:e,content:t,id:l,position:n,connections:i}){return{imageURL:e,content:t,id:l,position:n,connections:i}}function Mt(e){return e.map(At)}const Q=ft([{name:"Conspirasea",elements:[]}]),ge=ft(0),A=ht([Q,ge],([e,t])=>e[t],e=>(Q.set(oe(Q).map((t,l)=>oe(ge)==l?e:t)),[oe(Q),oe(ge)])),Ot=ht(A,e=>e.elements,e=>({name:oe(A).name,elements:e}));function Qe(e,t,l){const n=e.slice();return n[10]=t[l],n[11]=t,n[12]=l,n}function Ze(e){let t,l,n,i,o,a,d,g,p,s,r,f,c=e[1],m=[];for(let u=0;u<c.length;u+=1)m[u]=je(Qe(e,c,u));return{c(){t=I("div"),n=J(),i=I("div");for(let u=0;u<m.length;u+=1)m[u].c();o=J(),a=I("button"),d=Re("svg"),g=Re("path"),this.h()},l(u){t=U(u,"DIV",{class:!0}),O(t).forEach(y),n=F(u),i=U(u,"DIV",{class:!0});var w=O(i);for(let S=0;S<m.length;S+=1)m[S].l(w);o=F(w),a=U(w,"BUTTON",{class:!0});var _=O(a);d=Pe(_,"svg",{class:!0,viewBox:!0});var b=O(d);g=Pe(b,"path",{d:!0,"clip-rule":!0,"fill-rule":!0}),O(g).forEach(y),b.forEach(y),_.forEach(y),w.forEach(y),this.h()},h(){C(t,"class","fixed z-10 top-0 left-0 w-screen h-screen bg-gray-600/50"),C(g,"d","M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"),C(g,"clip-rule","evenodd"),C(g,"fill-rule","evenodd"),C(d,"class","w-4 h-4 fill-current"),C(d,"viewBox","0 0 20 20"),C(a,"class","active:ring ring-lime-200 transition-all m-2 mt-4 rounded-full bg-lime-300 hover:bg-lime-400 active:bg-lime-500 p-4"),C(i,"class","rounded-r-lg text-center fixed z-20 top-0 left-0 bg-white min-h-screen shadow-lg p-5")},m(u,w){B(u,t,w),B(u,n,w),B(u,i,w);for(let _=0;_<m.length;_+=1)m[_].m(i,null);M(i,o),M(i,a),M(a,d),M(d,g),s=!0,r||(f=[V(t,"click",e[4]),V(a,"click",e[9])],r=!0)},p(u,w){if(w&14){c=u[1];let _;for(_=0;_<c.length;_+=1){const b=Qe(u,c,_);m[_]?m[_].p(b,w):(m[_]=je(b),m[_].c(),m[_].m(i,o))}for(;_<m.length;_+=1)m[_].d(1);m.length=c.length}},i(u){s||(Ne(()=>{l||(l=de(t,Ke,{},!0)),l.run(1)}),Ne(()=>{p||(p=de(i,ke,{x:-150},!0)),p.run(1)}),s=!0)},o(u){l||(l=de(t,Ke,{},!1)),l.run(0),p||(p=de(i,ke,{x:-150},!1)),p.run(0),s=!1},d(u){u&&y(t),u&&l&&l.end(),u&&y(n),u&&y(i),rt(m,u),u&&p&&p.end(),r=!1,he(f)}}}function Vt(e){let t,l=e[10].name+"",n,i,o;function a(){return e[7](e[10],e[11],e[12])}return{c(){t=I("p"),n=ne(l)},l(d){t=U(d,"P",{});var g=O(t);n=le(g,l),g.forEach(y)},m(d,g){B(d,t,g),M(t,n),i||(o=V(t,"dblclick",a),i=!0)},p(d,g){e=d,g&2&&l!==(l=e[10].name+"")&&Oe(n,l)},d(d){d&&y(t),i=!1,o()}}}function Ht(e){let t,l,n;function i(){return e[5](e[10],e[11],e[12])}function o(){e[6].call(t,e[11],e[12])}return{c(){t=I("input"),this.h()},l(a){t=U(a,"INPUT",{placeholder:!0}),this.h()},h(){C(t,"placeholder","Name")},m(a,d){B(a,t,d),we(t,e[10].name),l||(n=[V(t,"blur",i),V(t,"input",o)],l=!0)},p(a,d){e=a,d&2&&t.value!==e[10].name&&we(t,e[10].name)},d(a){a&&y(t),l=!1,he(n)}}}function It(e){let t;return{c(){t=ne("Load")},l(l){t=le(l,"Load")},m(l,n){B(l,t,n)},d(l){l&&y(t)}}}function Ut(e){let t;return{c(){t=ne("Loaded")},l(l){t=le(l,"Loaded")},m(l,n){B(l,t,n)},d(l){l&&y(t)}}}function je(e){let t,l,n,i,o,a,d;function g(u,w){return u[10].editable?Ht:Vt}let p=g(e),s=p(e);function r(u,w){return u[2]==u[10]?Ut:It}let f=r(e),c=f(e);function m(){return e[8](e[12])}return{c(){t=I("div"),s.c(),l=J(),n=I("div"),i=I("button"),c.c(),this.h()},l(u){t=U(u,"DIV",{class:!0});var w=O(t);s.l(w),l=F(w),n=U(w,"DIV",{});var _=O(n);i=U(_,"BUTTON",{class:!0});var b=O(i);c.l(b),b.forEach(y),_.forEach(y),w.forEach(y),this.h()},h(){C(i,"class","m-2 px-4 py-2 bg-gray-300 transition-all rounded-lg hover:bg-gray-400 active:bg-gray-500"),i.disabled=o=e[2]==e[10],C(t,"class","bg-gray-100 rounded-lg shadow-lg p-4 mt-4")},m(u,w){B(u,t,w),s.m(t,null),M(t,l),M(t,n),M(n,i),c.m(i,null),a||(d=V(i,"click",m),a=!0)},p(u,w){e=u,p===(p=g(e))&&s?s.p(e,w):(s.d(1),s=p(e),s&&(s.c(),s.m(t,l))),f!==(f=r(e))&&(c.d(1),c=f(e),c&&(c.c(),c.m(i,null))),w&6&&o!==(o=e[2]==e[10])&&(i.disabled=o)},d(u){u&&y(t),s.d(),c.d(),a=!1,d()}}}function zt(e){let t,l,n=e[0]&&Ze(e);return{c(){n&&n.c(),t=$e()},l(i){n&&n.l(i),t=$e()},m(i,o){n&&n.m(i,o),B(i,t,o),l=!0},p(i,[o]){i[0]?n?(n.p(i,o),o&1&&te(n,1)):(n=Ze(i),n.c(),te(n,1),n.m(t.parentNode,t)):n&&(ot(),fe(n,1,1,()=>{n=null}),st())},i(i){l||(te(n),l=!0)},o(i){fe(n),l=!1},d(i){n&&n.d(i),i&&y(t)}}}function Lt(e,t,l){let n,i,o;pe(e,Q,c=>l(1,n=c)),pe(e,A,c=>l(2,i=c)),pe(e,ge,c=>l(3,o=c));let{visible:a}=t;const d=()=>{l(0,a=!a)},g=(c,m,u)=>{z(Q,m[u].editable=!1,n)};function p(c,m){c[m].name=this.value,Q.set(n)}const s=(c,m,u)=>{z(Q,m[u].editable=!c.editable,n)},r=c=>{z(ge,o=c,o)},f=()=>z(Q,n=[...n,{name:"New Conspirasea",elements:[]}],n);return e.$$set=c=>{"visible"in c&&l(0,a=c.visible)},[a,n,i,o,d,g,p,s,r,f]}class Rt extends Be{constructor(t){super(),Ae(this,t,Lt,zt,Me,{visible:0})}}function xe(e){let t,l,n,i,o,a,d,g,p,s,r,f,c;return{c(){t=I("div"),l=I("button"),n=ne("Conspiraseas"),i=J(),o=I("button"),a=ne("Download"),d=J(),g=I("button"),p=ne("Load"),this.h()},l(m){t=U(m,"DIV",{class:!0});var u=O(t);l=U(u,"BUTTON",{class:!0});var w=O(l);n=le(w,"Conspiraseas"),w.forEach(y),i=F(u),o=U(u,"BUTTON",{class:!0});var _=O(o);a=le(_,"Download"),_.forEach(y),d=F(u),g=U(u,"BUTTON",{class:!0});var b=O(g);p=le(b,"Load"),b.forEach(y),u.forEach(y),this.h()},h(){C(l,"class","bg-cyan-200 px-4 py-2 rounded-lg mx-2 hover:bg-cyan-300 transition-all active:bg-cyan-400 active:ring ring-cyan-100"),C(o,"class","bg-cyan-200 px-4 py-2 rounded-lg mx-2 hover:bg-cyan-300 transition-all active:bg-cyan-400 active:ring ring-cyan-100"),C(g,"class","bg-cyan-200 px-4 py-2 rounded-lg mx-2 hover:bg-cyan-300 transition-all active:bg-cyan-400 active:ring ring-cyan-100"),C(t,"class","fixed top-0 left-0 w-screen p-4 bg-white shadow-lg rounded-b-lg")},m(m,u){B(m,t,u),M(t,l),M(l,n),M(t,i),M(t,o),M(o,a),M(t,d),M(t,g),M(g,p),r=!0,f||(c=[V(l,"click",e[3]),V(o,"click",e[4])],f=!0)},p:mt,i(m){r||(Ne(()=>{s||(s=de(t,ke,{y:-150},!0)),s.run(1)}),r=!0)},o(m){s||(s=de(t,ke,{y:-150},!1)),s.run(0),r=!1},d(m){m&&y(t),m&&s&&s.end(),f=!1,he(c)}}}function Pt(e){let t,l,n,i,o=e[0]?"Hide":"Show",a,d,g,p,s=e[0]&&xe(e);return l=new Rt({props:{visible:e[1]}}),{c(){s&&s.c(),t=J(),at(l.$$.fragment),n=J(),i=I("button"),a=ne(o),this.h()},l(r){s&&s.l(r),t=F(r),ct(l.$$.fragment,r),n=F(r),i=U(r,"BUTTON",{class:!0});var f=O(i);a=le(f,o),f.forEach(y),this.h()},h(){C(i,"class","fixed top-0 right-0 m-4 px-4 py-2 rounded-lg mx-2 bg-cyan-200")},m(r,f){s&&s.m(r,f),B(r,t,f),ut(l,r,f),B(r,n,f),B(r,i,f),M(i,a),d=!0,g||(p=V(i,"click",e[5]),g=!0)},p(r,[f]){r[0]?s?(s.p(r,f),f&1&&te(s,1)):(s=xe(r),s.c(),te(s,1),s.m(t.parentNode,t)):s&&(ot(),fe(s,1,1,()=>{s=null}),st());const c={};f&2&&(c.visible=r[1]),l.$set(c),(!d||f&1)&&o!==(o=r[0]?"Hide":"Show")&&Oe(a,o)},i(r){d||(te(s),te(l.$$.fragment,r),d=!0)},o(r){fe(s),fe(l.$$.fragment,r),d=!1},d(r){s&&s.d(r),r&&y(t),dt(l,r),r&&y(n),r&&y(i),g=!1,p()}}}function $t(e,t,l){let n;pe(e,Ot,p=>l(2,n=p));let i=!0,o=!1;return[i,o,n,()=>{l(1,o=!o)},()=>alert(JSON.stringify(Mt(n))),()=>l(0,i=!i)]}class Xt extends Be{constructor(t){super(),Ae(this,t,$t,Pt,Me,{})}}const{window:Yt}=yt;function et(e,t,l){const n=e.slice();return n[18]=t[l],n[19]=t,n[20]=l,n}function Wt(e){let t,l=(e[18].content||"")+"",n;return{c(){t=I("span"),n=ne(l)},l(i){t=U(i,"SPAN",{});var o=O(t);n=le(o,l),o.forEach(y)},m(i,o){B(i,t,o),M(t,n)},p(i,o){o&8&&l!==(l=(i[18].content||"")+"")&&Oe(n,l)},d(i){i&&y(t)}}}function qt(e){let t,l=e[19],n=e[20],i,o;function a(...r){return e[7](e[18],e[19],e[20],...r)}const d=()=>e[8](t,l,n),g=()=>e[8](null,l,n);function p(){return e[9](e[18],e[19],e[20])}function s(){e[10].call(t,e[19],e[20])}return{c(){t=I("textarea"),this.h()},l(r){t=U(r,"TEXTAREA",{class:!0,placeholder:!0}),O(t).forEach(y),this.h()},h(){C(t,"class","resize-none dark:bg-black bg-white"),C(t,"placeholder","Enter notes content...")},m(r,f){B(r,t,f),d(),we(t,e[18].content),i||(o=[V(t,"keydown",a),V(t,"blur",p),V(t,"input",s)],i=!0)},p(r,f){e=r,(l!==e[19]||n!==e[20])&&(g(),l=e[19],n=e[20],d()),f&8&&we(t,e[18].content)},d(r){r&&y(t),g(),i=!1,he(o)}}}function tt(e){let t,l,n,i=e[19],o=e[20],a,d,g;function p(b,S){return b[18].editable?qt:Wt}let s=p(e),r=s(e);const f=()=>e[11](t,i,o),c=()=>e[11](null,i,o);function m(){return e[12](e[18],e[19],e[20])}function u(){return e[13](e[18],e[19],e[20])}function w(...b){return e[14](e[18],e[19],e[20],...b)}function _(){return e[15](e[18],e[19],e[20])}return{c(){t=I("div"),r.c(),l=J(),this.h()},l(b){t=U(b,"DIV",{class:!0});var S=O(t);r.l(S),l=F(S),S.forEach(y),this.h()},h(){C(t,"class",n="transition-shadow fixed max-w-md z-0 p-6 shadow-lg rounded-md "+(e[18].selected?"bg-gray-200":"bg-white")+" dark:bg-black")},m(b,S){B(b,t,S),r.m(t,null),M(t,l),f(),d||(g=[V(t,"dblclick",m),V(t,"click",u),_t(a=Tt.call(null,t,{axis:"both",bounds:"#container",position:e[18].position,defaultClassDragging:"box-dragging"})),V(t,"neodrag",w),V(t,"neodrag:end",_)],d=!0)},p(b,S){e=b,s===(s=p(e))&&r?r.p(e,S):(r.d(1),r=s(e),r&&(r.c(),r.m(t,l))),S&8&&n!==(n="transition-shadow fixed max-w-md z-0 p-6 shadow-lg rounded-md "+(e[18].selected?"bg-gray-200":"bg-white")+" dark:bg-black")&&C(t,"class",n),(i!==e[19]||o!==e[20])&&(c(),i=e[19],o=e[20],f()),a&&bt(a.update)&&S&8&&a.update.call(null,{axis:"both",bounds:"#container",position:e[18].position,defaultClassDragging:"box-dragging"})},d(b){b&&y(t),r.d(),c(),d=!1,he(g)}}}function Jt(e){let t,l,n,i,o,a,d,g,p=e[3].elements,s=[];for(let r=0;r<p.length;r+=1)s[r]=tt(et(e,p,r));return o=new Xt({}),{c(){t=I("div");for(let r=0;r<s.length;r+=1)s[r].c();l=J(),n=I("canvas"),i=J(),at(o.$$.fragment),this.h()},l(r){t=U(r,"DIV",{id:!0,class:!0});var f=O(t);for(let c=0;c<s.length;c+=1)s[c].l(f);f.forEach(y),l=F(r),n=U(r,"CANVAS",{class:!0,width:!0,height:!0}),O(n).forEach(y),i=F(r),ct(o.$$.fragment,r),this.h()},h(){C(t,"id","container"),C(t,"class","fixed top-0 left-0 h-full w-screen bg-gray-300"),C(n,"class","fixed top-0 left-0 pointer-events-none"),C(n,"width",e[0]),C(n,"height",e[1])},m(r,f){B(r,t,f);for(let c=0;c<s.length;c+=1)s[c].m(t,null);B(r,l,f),B(r,n,f),e[17](n),B(r,i,f),ut(o,r,f),a=!0,d||(g=[V(Yt,"resize",e[6]),V(t,"click",Xe(e[16])),V(t,"dblclick",Xe(e[4]))],d=!0)},p(r,[f]){if(f&8){p=r[3].elements;let c;for(c=0;c<p.length;c+=1){const m=et(r,p,c);s[c]?s[c].p(m,f):(s[c]=tt(m),s[c].c(),s[c].m(t,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=p.length}(!a||f&1)&&C(n,"width",r[0]),(!a||f&2)&&C(n,"height",r[1])},i(r){a||(te(o.$$.fragment,r),a=!0)},o(r){fe(o.$$.fragment,r),a=!1},d(r){r&&y(t),rt(s,r),r&&y(l),r&&y(n),e[17](null),r&&y(i),dt(o,r),d=!1,he(g)}}}function Ft(e,t,l){let n;pe(e,A,h=>l(3,n=h));let i,o,a=null;vt(()=>{l(0,i=window.innerWidth),l(1,o=window.innerHeight)});function d(h){z(A,n.elements=[...n.elements,{position:{x:h.pageX,y:h.pageY},connections:[],id:crypto.randomUUID(),content:"My conspiracy note"}],n)}function g(){if(!a||!a.getContext("2d"))return;const h=a.getContext("2d");h.clearRect(0,0,i,o),n.elements.forEach(k=>k.connections.forEach(E=>{var re,X,Y,ce;const D=n.elements.filter(G=>G.id==E);if(D.length===0)return;const H=D[0];h.strokeStyle="rgba(235, 64, 52, 0.3)",h.lineWidth=4,h.beginPath();const $=k.position.x+(((re=k.self)==null?void 0:re.clientWidth)||0)/2,se=k.position.y+(((X=k.self)==null?void 0:X.clientHeight)||0)/8,ae=H.position.x+(((Y=H.self)==null?void 0:Y.clientWidth)||0)/2,ie=H.position.y+(((ce=H.self)==null?void 0:ce.clientHeight)||0)/8;h.moveTo($,se),h.lineTo(ae,ie),h.stroke(),h.strokeStyle="rgba(0, 0, 0, 0)",h.fillStyle="#ebde34",h.beginPath(),h.arc($,se,7,0,2*Math.PI),h.fill(),h.beginPath(),h.arc(ae,ie,7,0,2*Math.PI),h.fill()}))}const p=()=>{l(0,i=window.innerWidth),l(1,o=window.innerHeight),Ce().then(g)},s=(h,k,E,D)=>{(D.key=="Escape"||D.key=="Esc")&&z(A,k[E].editable=!1,n)};function r(h,k,E){De[h?"unshift":"push"](()=>{k[E].textarea=h,A.set(n)})}const f=(h,k,E)=>z(A,k[E].editable=!1,n);function c(h,k){h[k].content=this.value,A.set(n)}function m(h,k,E){De[h?"unshift":"push"](()=>{k[E].self=h,A.set(n)})}const u=(h,k,E)=>{z(A,k[E].editable=!h.editable,n),Ce().then(()=>{var D;return(D=h.textarea)==null?void 0:D.focus()})},w=(h,k,E)=>{const D=n.elements.filter(H=>H!==h).filter(H=>H.selected);if(D.length!==0){if(D[0].connections.some(H=>H==h.id))return;z(A,n.elements[n.elements.indexOf(D[0])].selected=!1,n),z(A,k[E].connections=[...h.connections,D[0].id],n),A.set(n);return}z(A,k[E].selected=!h.selected,n)},_=(h,k,E,D)=>{if(!D||!D.detail)return;const{offsetX:H,offsetY:$}=D.detail;z(A,k[E].position.x=H,n),z(A,k[E].position.y=$,n)},b=(h,k,E)=>Ce().then(()=>{z(A,k[E].selected=!1,n)}),S=()=>{z(A,n.elements=n.elements.map(h=>(h.selected=!1,h)),n)};function P(h){De[h?"unshift":"push"](()=>{a=h,l(2,a)})}return e.$$.update=()=>{e.$$.dirty&15&&i&&o&&n.elements.length>0&&a&&a.getContext("2d")&&g()},[i,o,a,n,d,g,p,s,r,f,c,m,u,w,_,b,S,P]}class Qt extends Be{constructor(t){super(),Ae(this,t,Ft,Jt,Me,{})}}export{Qt as default};

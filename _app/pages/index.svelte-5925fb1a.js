import{N as bt,O as re,S as we,i as ke,s as Ee,e as A,k as P,P as We,c as M,a as O,d as w,m as X,Q as qe,b as C,g as I,M as D,R as z,T as Oe,U as ae,V as ut,G as se,l as Je,q as J,n as dt,o as le,p as ft,W as x,v as ht,X as U,t as F,h as G,j as He,Y as ve,E as Ie,w as Ae,x as Me,y as ze,B as Ue,Z as vt,D as Ve,_ as ue,$ as yt,H as wt,a0 as kt,a1 as Fe,a2 as Et}from"../chunks/index-843c5a60.js";import{d as pt,w as gt}from"../chunks/index-a755a01d.js";function Ct(e,t,r,n){var l,s=(l=n)==null||typeof l=="number"||typeof l=="boolean"?n:r(n),c=t.get(s);return c===void 0&&(c=e.call(this,n),t.set(s,c)),c}function St(e,t,r){var n=Array.prototype.slice.call(arguments,3),l=r(n),s=t.get(l);return s===void 0&&(s=e.apply(this,n),t.set(l,s)),s}function Tt(e,t){return function(r,n,l,s,c){return l.bind(n,r,s,c)}(e,this,e.length===1?Ct:St,t.cache.create(),t.serializer)}const Dt=JSON.stringify;function be(){this.cache=Object.create(null)}be.prototype.has=function(e){return e in this.cache},be.prototype.get=function(e){return this.cache[e]},be.prototype.set=function(e,t){this.cache[e]=t};var Nt={create:function(){return new be}};const Bt=(e,t={})=>{var Pe,Xe;let{bounds:r,axis:n="both",gpuAcceleration:l=!0,applyUserSelectHack:s=!0,disabled:c=!1,ignoreMultitouch:d=!1,grid:p,position:_,cancel:u,handle:a,defaultClass:m="neodrag",defaultClassDragging:b="neodrag-dragging",defaultClassDragged:v="neodrag-dragged",defaultPosition:i={x:0,y:0},onDragStart:g,onDrag:f,onDragEnd:o}=t;const h=new Promise(requestAnimationFrame);let k,E,N=!1,V=0,Y=0,oe=0,ce=0,Ce=0,Se=0,{x:fe,y:he}=_?{x:(Pe=_==null?void 0:_.x)!=null?Pe:0,y:(Xe=_==null?void 0:_.y)!=null?Xe:0}:i;Be(fe,he,e,l);let ee,te,Te,ne,Le="",_t=!!_;const De=document.body.style,j=e.classList,Ne=(y,$)=>{const W={offsetX:V,offsetY:Y,domRect:e.getBoundingClientRect()};e.dispatchEvent(new CustomEvent(y,{detail:W})),$==null||$(W)},ie=addEventListener;ie("touchstart",pe,!1),ie("touchend",ge,!1),ie("touchmove",me,!1),ie("mousedown",pe,!1),ie("mouseup",ge,!1),ie("mousemove",me,!1),e.style.touchAction="none";const Re=()=>{let y=e.offsetWidth/te.width;return isNaN(y)&&(y=1),y};function pe(y){if(c||d&&y.type==="touchstart"&&y.touches.length>1)return;if(j.add(m),Te=function(S,H){if(!S)return H;if(S instanceof HTMLElement)return S;const B=H.querySelector(S);if(B===null)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return B}(a,e),ne=function(S,H){if(!S)return;if(S instanceof HTMLElement)return S;const B=H.querySelector(S);if(B===null)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return B}(u,e),k=/(both|x)/.test(n),E=/(both|y)/.test(n),r!==void 0&&(ee=function(S,H){if(S instanceof HTMLElement)return S.getBoundingClientRect();if(typeof S=="object"){const{top:K=0,left:Q=0,right:Z=0,bottom:_e=0}=S;return{top:K,right:window.innerWidth-Z,bottom:window.innerHeight-_e,left:Q}}if(S==="parent")return H.parentNode.getBoundingClientRect();const B=document.querySelector(S);if(B===null)throw new Error("The selector provided for bound doesn't exists in the document.");return B.getBoundingClientRect()}(r,e)),te=e.getBoundingClientRect(),Ke(a)&&Ke(u)&&a===u)throw new Error("`handle` selector can't be same as `cancel` selector");if(ne!=null&&ne.contains(Te))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");if(Te.contains(y.target)&&!(ne!=null&&ne.contains(y.target))&&(N=!0),!N)return;s&&(Le=De.userSelect,De.userSelect="none"),Ne("neodrag:start",g);const{clientX:$,clientY:W}=Ge(y)?y.touches[0]:y,R=Re();k&&(oe=$-fe/R),E&&(ce=W-he/R),ee&&(Ce=$-te.left,Se=W-te.top)}function ge(){N&&(j.remove(b),j.add(v),s&&(De.userSelect=Le),Ne("neodrag:end",o),k&&(oe=V),k&&(ce=Y),N=!1)}function me(y){if(!N)return;j.add(b),y.preventDefault(),te=e.getBoundingClientRect();const{clientX:$,clientY:W}=Ge(y)?y.touches[0]:y;let R=$,S=W;const H=Re();if(ee){const B={left:ee.left+Ce,top:ee.top+Se,right:ee.right+Ce-te.width,bottom:ee.bottom+Se-te.height};R=je(R,B.left,B.right),S=je(S,B.top,B.bottom)}if(Array.isArray(p)){let[B,K]=p;if(isNaN(+B)||B<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+K)||K<0)throw new Error("2nd argument of `grid` must be a valid positive number");let Q=R-oe,Z=S-ce;[Q,Z]=Ot([Math.floor(B/H),Math.floor(K/H)],Q,Z),R=oe+Q,S=ce+Z}k&&(V=(R-oe)*H),E&&(Y=(S-ce)*H),fe=V,he=Y,Ne("neodrag",f),h.then(()=>Be(V,Y,e,l))}return{destroy:()=>{const y=removeEventListener;y("touchstart",pe,!1),y("touchend",ge,!1),y("touchmove",me,!1),y("mousedown",pe,!1),y("mouseup",ge,!1),y("mousemove",me,!1)},update:y=>{var W,R,S,H,B,K,Q,Z,_e,Ye,$e;n=y.axis||"both",c=(W=y.disabled)!=null?W:!1,d=(R=y.ignoreMultitouch)!=null?R:!1,a=y.handle,r=y.bounds,u=y.cancel,s=(S=y.applyUserSelectHack)!=null?S:!0,p=y.grid,l=(H=y.gpuAcceleration)!=null?H:!0;const $=j.contains(v);j.remove(m,v),m=(B=y.defaultClass)!=null?B:"neodrag",b=(K=y.defaultClassDragging)!=null?K:"neodrag-dragging",v=(Q=y.defaultClassDragged)!=null?Q:"neodrag-dragged",j.add(m),$&&j.add(v),_t&&(fe=V=(_e=(Z=y.position)==null?void 0:Z.x)!=null?_e:V,he=Y=($e=(Ye=y.position)==null?void 0:Ye.y)!=null?$e:Y,h.then(()=>Be(V,Y,e,l)))}}},Ge=e=>{var t;return!!((t=e.touches)!=null&&t.length)},je=(e,t,r)=>Math.min(Math.max(e,t),r),Ke=e=>typeof e=="string";var st,ot,ct;const Ot=(Qe=([e,t],r,n)=>{const l=(s,c)=>Math.round(s/c)*c;return[l(r,e),l(n,t)]},Ze=(st=q==null?void 0:q.cache)!=null?st:Nt,xe=(ot=q==null?void 0:q.serializer)!=null?ot:Dt,((ct=q==null?void 0:q.strategy)!=null?ct:Tt)(Qe,{cache:Ze,serializer:xe}));var Qe,q,Ze,xe;function Be(e,t,r,n){r.style.transform=n?`translate3d(${+e}px, ${+t}px, 0)`:`translate(${+e}px, ${+t}px)`}function It(e){const t=e-1;return t*t*t+1}function et(e,{delay:t=0,duration:r=400,easing:n=bt}={}){const l=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:n,css:s=>`opacity: ${s*l}`}}function ye(e,{delay:t=0,duration:r=400,easing:n=It,x:l=0,y:s=0,opacity:c=0}={}){const d=getComputedStyle(e),p=+d.opacity,_=d.transform==="none"?"":d.transform,u=p*(1-c);return{delay:t,duration:r,easing:n,css:(a,m)=>`
			transform: ${_} translate(${(1-a)*l}px, ${(1-a)*s}px);
			opacity: ${p-u*m}`}}function mt(e,t,r,n){var l,s,c=!0,d="withOld"in r,p=(f,o)=>{if(l=o,d&&(s=f),c){let h=t(f,o);if(t.length<2)o(h);else return h}},_=pt(e,p,n),u=!Array.isArray(e),a=f=>{c=!1,u?e.set(f):f.forEach((o,h)=>{e[h].set(o)}),c=!0};d&&(r=r.withOld);var m=r.length>=(d?3:2),b=null;function v(f){if(b&&(b(),b=null),d)var o=r(f,s,a);else var o=r(f,a);m?typeof o=="function"&&(b=o):a(o)}var i=!1;function g(f){var o,h,k,E;if(i){E=f(re(_)),l(E);return}var N=_.subscribe(V=>{i?o?h=!0:o=!0:k=V});E=f(k),i=!0,l(E),N(),i=!1,h&&(E=re(_)),o&&v(E)}return{subscribe:_.subscribe,set(f){g(()=>f)},update:g}}function At({imageURL:e,content:t,id:r,position:n,connections:l}){return{imageURL:e,content:t,id:r,position:n,connections:l}}function Mt({name:e,elements:t}){return{name:e,elements:t.map(At)}}const L=gt([{name:"Conspirasea",elements:[]}]),zt=pt(L,e=>e.map(Mt)),de=gt(0),T=mt([L,de],([e,t])=>e[t],e=>(L.set(re(L).map((t,r)=>re(de)==r?e:t)),[re(L),re(de)]));mt(T,e=>e.elements,e=>({name:re(T).name,elements:e}));function tt(e,t,r){const n=e.slice();return n[12]=t[r],n[13]=t,n[14]=r,n}function nt(e){let t,r,n,l,s,c,d,p,_,u,a,m,b=e[1],v=[];for(let i=0;i<b.length;i+=1)v[i]=rt(tt(e,b,i));return{c(){t=A("div"),n=P(),l=A("div");for(let i=0;i<v.length;i+=1)v[i].c();s=P(),c=A("button"),d=We("svg"),p=We("path"),this.h()},l(i){t=M(i,"DIV",{class:!0}),O(t).forEach(w),n=X(i),l=M(i,"DIV",{class:!0});var g=O(l);for(let h=0;h<v.length;h+=1)v[h].l(g);s=X(g),c=M(g,"BUTTON",{class:!0});var f=O(c);d=qe(f,"svg",{class:!0,viewBox:!0});var o=O(d);p=qe(o,"path",{d:!0,"clip-rule":!0,"fill-rule":!0}),O(p).forEach(w),o.forEach(w),f.forEach(w),g.forEach(w),this.h()},h(){C(t,"class","fixed z-10 top-0 left-0 w-screen h-screen bg-gray-600/50"),C(p,"d","M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"),C(p,"clip-rule","evenodd"),C(p,"fill-rule","evenodd"),C(d,"class","w-4 h-4 fill-current"),C(d,"viewBox","0 0 20 20"),C(c,"class","active:ring ring-lime-200 transition-all m-2 mt-4 rounded-full bg-lime-300 hover:bg-lime-400 active:bg-lime-500 p-4"),C(l,"class","rounded-r-lg text-center fixed z-20 top-0 left-0 bg-white min-h-screen shadow-lg p-5")},m(i,g){I(i,t,g),I(i,n,g),I(i,l,g);for(let f=0;f<v.length;f+=1)v[f].m(l,null);D(l,s),D(l,c),D(c,d),D(d,p),u=!0,a||(m=[z(t,"click",e[6]),z(c,"click",e[11])],a=!0)},p(i,g){if(g&14){b=i[1];let f;for(f=0;f<b.length;f+=1){const o=tt(i,b,f);v[f]?v[f].p(o,g):(v[f]=rt(o),v[f].c(),v[f].m(l,s))}for(;f<v.length;f+=1)v[f].d(1);v.length=b.length}},i(i){u||(Oe(()=>{r||(r=ae(t,et,{},!0)),r.run(1)}),Oe(()=>{_||(_=ae(l,ye,{x:-150},!0)),_.run(1)}),u=!0)},o(i){r||(r=ae(t,et,{},!1)),r.run(0),_||(_=ae(l,ye,{x:-150},!1)),_.run(0),u=!1},d(i){i&&w(t),i&&r&&r.end(),i&&w(n),i&&w(l),ut(v,i),i&&_&&_.end(),a=!1,se(m)}}}function Ut(e){let t,r=e[12].name+"",n,l,s;function c(){return e[9](e[12],e[13],e[14])}return{c(){t=A("p"),n=F(r)},l(d){t=M(d,"P",{});var p=O(t);n=G(p,r),p.forEach(w)},m(d,p){I(d,t,p),D(t,n),l||(s=z(t,"dblclick",c),l=!0)},p(d,p){e=d,p&2&&r!==(r=e[12].name+"")&&He(n,r)},d(d){d&&w(t),l=!1,s()}}}function Vt(e){let t,r,n;function l(){return e[7](e[12],e[13],e[14])}function s(){e[8].call(t,e[13],e[14])}return{c(){t=A("input"),this.h()},l(c){t=M(c,"INPUT",{placeholder:!0}),this.h()},h(){C(t,"placeholder","Name")},m(c,d){I(c,t,d),ve(t,e[12].name),r||(n=[z(t,"blur",l),z(t,"input",s)],r=!0)},p(c,d){e=c,d&2&&t.value!==e[12].name&&ve(t,e[12].name)},d(c){c&&w(t),r=!1,se(n)}}}function Ht(e){let t;return{c(){t=F("Load")},l(r){t=G(r,"Load")},m(r,n){I(r,t,n)},d(r){r&&w(t)}}}function Lt(e){let t;return{c(){t=F("Loaded")},l(r){t=G(r,"Loaded")},m(r,n){I(r,t,n)},d(r){r&&w(t)}}}function rt(e){let t,r,n,l,s,c,d;function p(i,g){return i[12].editable?Vt:Ut}let _=p(e),u=_(e);function a(i,g){return i[2]==i[12]?Lt:Ht}let m=a(e),b=m(e);function v(){return e[10](e[14])}return{c(){t=A("div"),u.c(),r=P(),n=A("div"),l=A("button"),b.c(),this.h()},l(i){t=M(i,"DIV",{class:!0});var g=O(t);u.l(g),r=X(g),n=M(g,"DIV",{});var f=O(n);l=M(f,"BUTTON",{class:!0});var o=O(l);b.l(o),o.forEach(w),f.forEach(w),g.forEach(w),this.h()},h(){C(l,"class","m-2 px-4 py-2 bg-gray-300 transition-all rounded-lg hover:bg-gray-400 active:bg-gray-500"),l.disabled=s=e[2]==e[12],C(t,"class","bg-gray-100 rounded-lg shadow-lg p-4 mt-4")},m(i,g){I(i,t,g),u.m(t,null),D(t,r),D(t,n),D(n,l),b.m(l,null),c||(d=z(l,"click",v),c=!0)},p(i,g){e=i,_===(_=p(e))&&u?u.p(e,g):(u.d(1),u=_(e),u&&(u.c(),u.m(t,r))),m!==(m=a(e))&&(b.d(1),b=m(e),b&&(b.c(),b.m(l,null))),g&6&&s!==(s=e[2]==e[12])&&(l.disabled=s)},d(i){i&&w(t),u.d(),b.d(),c=!1,d()}}}function Rt(e){let t,r,n=e[0]&&nt(e);return{c(){n&&n.c(),t=Je()},l(l){n&&n.l(l),t=Je()},m(l,s){n&&n.m(l,s),I(l,t,s),r=!0},p(l,[s]){l[0]?n?(n.p(l,s),s&1&&J(n,1)):(n=nt(l),n.c(),J(n,1),n.m(t.parentNode,t)):n&&(dt(),le(n,1,1,()=>{n=null}),ft())},i(l){r||(J(n),r=!0)},o(l){le(n),r=!1},d(l){n&&n.d(l),l&&w(t)}}}function Pt(e,t,r){let n,l,s,c;x(e,zt,i=>r(5,n=i)),x(e,L,i=>r(1,l=i)),x(e,T,i=>r(2,s=i)),x(e,de,i=>r(3,c=i));let d=!1;ht(()=>{const i=localStorage.getItem("data");if(!i)return;const g=JSON.parse(i);U(L,l=g,l),r(4,d=!0)});let{visible:p}=t;const _=()=>{r(0,p=!p)},u=(i,g,f)=>{U(L,g[f].editable=!1,l)};function a(i,g){i[g].name=this.value,L.set(l)}const m=(i,g,f)=>{U(L,g[f].editable=!i.editable,l)},b=i=>{U(de,c=i,c)},v=()=>U(L,l=[...l,{name:"New Conspirasea",elements:[]}],l);return e.$$set=i=>{"visible"in i&&r(0,p=i.visible)},e.$$.update=()=>{e.$$.dirty&50&&l&&globalThis.localStorage&&(d||localStorage.getItem("data")==null)&&localStorage.setItem("data",JSON.stringify(n))},[p,l,s,c,d,n,_,u,a,m,b,v]}class Xt extends we{constructor(t){super(),ke(this,t,Pt,Rt,Ee,{visible:0})}}function lt(e){let t,r,n,l,s,c,d,p,_,u,a,m,b,v,i,g;return{c(){t=A("div"),r=A("button"),n=F("Conspiraseas"),l=P(),s=A("button"),c=F("Download"),d=P(),p=A("button"),_=F("Load"),u=P(),a=A("button"),m=F("Clear"),this.h()},l(f){t=M(f,"DIV",{class:!0});var o=O(t);r=M(o,"BUTTON",{class:!0});var h=O(r);n=G(h,"Conspiraseas"),h.forEach(w),l=X(o),s=M(o,"BUTTON",{class:!0});var k=O(s);c=G(k,"Download"),k.forEach(w),d=X(o),p=M(o,"BUTTON",{class:!0});var E=O(p);_=G(E,"Load"),E.forEach(w),u=X(o),a=M(o,"BUTTON",{class:!0});var N=O(a);m=G(N,"Clear"),N.forEach(w),o.forEach(w),this.h()},h(){C(r,"class","bg-cyan-200 px-4 py-2 rounded-lg mx-2 hover:bg-cyan-300 transition-all active:bg-cyan-400 active:ring ring-cyan-100"),C(s,"class","bg-cyan-200 px-4 py-2 rounded-lg mx-2 hover:bg-cyan-300 transition-all active:bg-cyan-400 active:ring ring-cyan-100"),C(p,"class","bg-cyan-200 px-4 py-2 rounded-lg mx-2 hover:bg-cyan-300 transition-all active:bg-cyan-400 active:ring ring-cyan-100"),C(a,"class","bg-cyan-200 px-4 py-2 rounded-lg mx-2 hover:bg-cyan-300 transition-all active:bg-cyan-400 active:ring ring-cyan-100"),C(t,"class","fixed top-0 left-0 w-screen p-4 bg-white shadow-lg rounded-b-lg")},m(f,o){I(f,t,o),D(t,r),D(r,n),D(t,l),D(t,s),D(s,c),D(t,d),D(t,p),D(p,_),D(t,u),D(t,a),D(a,m),v=!0,i||(g=[z(r,"click",e[4]),z(a,"click",e[5])],i=!0)},p:Ie,i(f){v||(Oe(()=>{b||(b=ae(t,ye,{y:-150},!0)),b.run(1)}),v=!0)},o(f){b||(b=ae(t,ye,{y:-150},!1)),b.run(0),v=!1},d(f){f&&w(t),f&&b&&b.end(),i=!1,se(g)}}}function Yt(e){let t,r,n,l,s=e[1]?"Hide":"Show",c,d,p,_,u=e[1]&&lt(e);return r=new Xt({props:{visible:e[2]}}),{c(){u&&u.c(),t=P(),Ae(r.$$.fragment),n=P(),l=A("button"),c=F(s),this.h()},l(a){u&&u.l(a),t=X(a),Me(r.$$.fragment,a),n=X(a),l=M(a,"BUTTON",{class:!0});var m=O(l);c=G(m,s),m.forEach(w),this.h()},h(){C(l,"class","fixed top-0 right-0 m-4 px-4 py-2 rounded-lg mx-2 bg-cyan-200")},m(a,m){u&&u.m(a,m),I(a,t,m),ze(r,a,m),I(a,n,m),I(a,l,m),D(l,c),d=!0,p||(_=z(l,"click",e[6]),p=!0)},p(a,[m]){a[1]?u?(u.p(a,m),m&2&&J(u,1)):(u=lt(a),u.c(),J(u,1),u.m(t.parentNode,t)):u&&(dt(),le(u,1,1,()=>{u=null}),ft());const b={};m&4&&(b.visible=a[2]),r.$set(b),(!d||m&2)&&s!==(s=a[1]?"Hide":"Show")&&He(c,s)},i(a){d||(J(u),J(r.$$.fragment,a),d=!0)},o(a){le(u),le(r.$$.fragment,a),d=!1},d(a){u&&u.d(a),a&&w(t),Ue(r,a),a&&w(n),a&&w(l),p=!1,_()}}}function $t(e,t,r){let n;x(e,T,u=>r(3,n=u));let l=!0,s=!1,{canvas:c}=t;const d=()=>{r(2,s=!s)},p=()=>{confirm("Are you sure you want to clear the elements?")&&(U(T,n.elements=[],n),c.draw())},_=()=>r(1,l=!l);return e.$$set=u=>{"canvas"in u&&r(0,c=u.canvas)},[c,l,s,n,d,p,_]}class Wt extends we{constructor(t){super(),ke(this,t,$t,Yt,Ee,{canvas:0})}}const{window:qt}=vt;function Jt(e){let t,r,n;return{c(){t=A("canvas"),this.h()},l(l){t=M(l,"CANVAS",{class:!0,width:!0,height:!0}),O(t).forEach(w),this.h()},h(){C(t,"class","fixed top-0 left-0 pointer-events-none"),C(t,"width",e[1]),C(t,"height",e[2])},m(l,s){I(l,t,s),e[7](t),r||(n=z(qt,"resize",e[6]),r=!0)},p(l,[s]){s&2&&C(t,"width",l[1]),s&4&&C(t,"height",l[2])},i:Ie,o:Ie,d(l){l&&w(t),e[7](null),r=!1,n()}}}function Ft(e,t,r){let n,l;x(e,T,a=>r(4,n=a)),x(e,L,a=>r(5,l=a));let s,c,d=null;ht(()=>{r(1,s=window.innerWidth),r(2,c=window.innerHeight)});function p(){if(!d||!d.getContext("2d"))return;const a=d.getContext("2d");a.clearRect(0,0,s,c),n.elements.forEach(m=>m.connections.forEach(b=>{var k,E,N,V;const v=n.elements.filter(Y=>Y.id==b);if(v.length===0)return;const i=v[0];a.strokeStyle="rgba(235, 64, 52, 0.3)",a.lineWidth=4,a.beginPath();const g=m.position.x+(((k=m.self)==null?void 0:k.clientWidth)||0)/2,f=m.position.y+(((E=m.self)==null?void 0:E.clientHeight)||0)/8,o=i.position.x+(((N=i.self)==null?void 0:N.clientWidth)||0)/2,h=i.position.y+(((V=i.self)==null?void 0:V.clientHeight)||0)/8;a.moveTo(g,f),a.lineTo(o,h),a.stroke(),a.strokeStyle="rgba(0, 0, 0, 0)",a.fillStyle="#ebde34",a.beginPath(),a.arc(g,f,7,0,2*Math.PI),a.fill(),a.beginPath(),a.arc(o,h,7,0,2*Math.PI),a.fill()}))}const _=()=>{r(1,s=window.innerWidth),r(2,c=window.innerHeight),Ve().then(p)};function u(a){ue[a?"unshift":"push"](()=>{d=a,r(3,d)})}return e.$$.update=()=>{e.$$.dirty&62&&s&&c&&l&&n.elements.length>0&&d&&d.getContext("2d")&&p()},[p,s,c,d,n,l,_,u]}class Gt extends we{constructor(t){super(),ke(this,t,Ft,Jt,Ee,{draw:0})}get draw(){return this.$$.ctx[0]}}function it(e,t,r){const n=e.slice();return n[15]=t[r],n[16]=t,n[17]=r,n}function jt(e){let t,r=(e[15].content||"")+"",n;return{c(){t=A("span"),n=F(r)},l(l){t=M(l,"SPAN",{});var s=O(t);n=G(s,r),s.forEach(w)},m(l,s){I(l,t,s),D(t,n)},p(l,s){s&2&&r!==(r=(l[15].content||"")+"")&&He(n,r)},d(l){l&&w(t)}}}function Kt(e){let t,r=e[16],n=e[17],l,s;function c(...a){return e[3](e[15],e[16],e[17],...a)}const d=()=>e[4](t,r,n),p=()=>e[4](null,r,n);function _(){return e[5](e[15],e[16],e[17])}function u(){e[6].call(t,e[16],e[17])}return{c(){t=A("textarea"),this.h()},l(a){t=M(a,"TEXTAREA",{class:!0,placeholder:!0}),O(t).forEach(w),this.h()},h(){C(t,"class","resize-none dark:bg-black bg-white"),C(t,"placeholder","Enter notes content...")},m(a,m){I(a,t,m),d(),ve(t,e[15].content),l||(s=[z(t,"keydown",c),z(t,"blur",_),z(t,"input",u)],l=!0)},p(a,m){e=a,(r!==e[16]||n!==e[17])&&(p(),r=e[16],n=e[17],d()),m&2&&ve(t,e[15].content)},d(a){a&&w(t),p(),l=!1,se(s)}}}function at(e){let t,r,n,l=e[16],s=e[17],c,d,p;function _(o,h){return o[15].editable?Kt:jt}let u=_(e),a=u(e);const m=()=>e[7](t,l,s),b=()=>e[7](null,l,s);function v(){return e[8](e[15],e[16],e[17])}function i(){return e[9](e[15],e[16],e[17])}function g(...o){return e[10](e[15],e[16],e[17],...o)}function f(){return e[11](e[15],e[16],e[17])}return{c(){t=A("div"),a.c(),r=P(),this.h()},l(o){t=M(o,"DIV",{class:!0});var h=O(t);a.l(h),r=X(h),h.forEach(w),this.h()},h(){C(t,"class",n="transition-shadow fixed max-w-md z-0 p-6 shadow-lg rounded-md "+(e[15].selected?"bg-gray-200":"bg-white")+" dark:bg-black")},m(o,h){I(o,t,h),a.m(t,null),D(t,r),m(),d||(p=[z(t,"dblclick",v),z(t,"click",i),yt(c=Bt.call(null,t,{axis:"both",bounds:"#container",position:e[15].position,defaultClassDragging:"box-dragging"})),z(t,"neodrag",g),z(t,"neodrag:end",f)],d=!0)},p(o,h){e=o,u===(u=_(e))&&a?a.p(e,h):(a.d(1),a=u(e),a&&(a.c(),a.m(t,r))),h&2&&n!==(n="transition-shadow fixed max-w-md z-0 p-6 shadow-lg rounded-md "+(e[15].selected?"bg-gray-200":"bg-white")+" dark:bg-black")&&C(t,"class",n),(l!==e[16]||s!==e[17])&&(b(),l=e[16],s=e[17],m()),c&&wt(c.update)&&h&2&&c.update.call(null,{axis:"both",bounds:"#container",position:e[15].position,defaultClassDragging:"box-dragging"})},d(o){o&&w(t),a.d(),b(),d=!1,se(p)}}}function Qt(e){let t,r,n,l,s,c,d,p,_,u=e[1].elements,a=[];for(let i=0;i<u.length;i+=1)a[i]=at(it(e,u,i));function m(i){e[13](i)}let b={};e[0]!==void 0&&(b.canvas=e[0]),n=new Wt({props:b}),ue.push(()=>kt(n,"canvas",m));let v={};return c=new Gt({props:v}),e[14](c),{c(){t=A("div");for(let i=0;i<a.length;i+=1)a[i].c();r=P(),Ae(n.$$.fragment),s=P(),Ae(c.$$.fragment),this.h()},l(i){t=M(i,"DIV",{id:!0,class:!0});var g=O(t);for(let f=0;f<a.length;f+=1)a[f].l(g);g.forEach(w),r=X(i),Me(n.$$.fragment,i),s=X(i),Me(c.$$.fragment,i),this.h()},h(){C(t,"id","container"),C(t,"class","fixed top-0 left-0 h-full w-screen bg-gray-300")},m(i,g){I(i,t,g);for(let f=0;f<a.length;f+=1)a[f].m(t,null);I(i,r,g),ze(n,i,g),I(i,s,g),ze(c,i,g),d=!0,p||(_=[z(t,"click",Fe(e[12])),z(t,"dblclick",Fe(e[2]))],p=!0)},p(i,[g]){if(g&2){u=i[1].elements;let h;for(h=0;h<u.length;h+=1){const k=it(i,u,h);a[h]?a[h].p(k,g):(a[h]=at(k),a[h].c(),a[h].m(t,null))}for(;h<a.length;h+=1)a[h].d(1);a.length=u.length}const f={};!l&&g&1&&(l=!0,f.canvas=i[0],Et(()=>l=!1)),n.$set(f);const o={};c.$set(o)},i(i){d||(J(n.$$.fragment,i),J(c.$$.fragment,i),d=!0)},o(i){le(n.$$.fragment,i),le(c.$$.fragment,i),d=!1},d(i){i&&w(t),ut(a,i),i&&w(r),Ue(n,i),i&&w(s),e[14](null),Ue(c,i),p=!1,se(_)}}}function Zt(e,t,r){let n;x(e,T,o=>r(1,n=o));let l;function s(o){U(T,n.elements=[...n.elements,{position:{x:o.pageX,y:o.pageY},connections:[],id:crypto.randomUUID(),content:"My conspiracy note"}],n)}const c=(o,h,k,E)=>{(E.key=="Escape"||E.key=="Esc")&&U(T,h[k].editable=!1,n)};function d(o,h,k){ue[o?"unshift":"push"](()=>{h[k].textarea=o,T.set(n)})}const p=(o,h,k)=>U(T,h[k].editable=!1,n);function _(o,h){o[h].content=this.value,T.set(n)}function u(o,h,k){ue[o?"unshift":"push"](()=>{h[k].self=o,T.set(n)})}const a=(o,h,k)=>{U(T,h[k].editable=!o.editable,n),Ve().then(()=>{var E;return(E=o.textarea)==null?void 0:E.focus()})},m=(o,h,k)=>{const E=n.elements.filter(N=>N!==o).filter(N=>N.selected);if(E.length!==0){if(E[0].connections.some(N=>N==o.id))return;U(T,n.elements[n.elements.indexOf(E[0])].selected=!1,n),U(T,h[k].connections=[...o.connections,E[0].id],n),T.set(n);return}U(T,h[k].selected=!o.selected,n)},b=(o,h,k,E)=>{if(!E||!E.detail)return;const{offsetX:N,offsetY:V}=E.detail;U(T,h[k].position.x=N,n),U(T,h[k].position.y=V,n)},v=(o,h,k)=>Ve().then(()=>{U(T,h[k].selected=!1,n)}),i=()=>{U(T,n.elements=n.elements.map(o=>(o.selected=!1,o)),n)};function g(o){l=o,r(0,l)}function f(o){ue[o?"unshift":"push"](()=>{l=o,r(0,l)})}return[l,n,s,c,d,p,_,u,a,m,b,v,i,g,f]}class tn extends we{constructor(t){super(),ke(this,t,Zt,Qt,Ee,{})}}export{tn as default};
